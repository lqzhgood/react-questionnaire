"use strict";(self.webpackChunkreact_questionnaire=self.webpackChunkreact_questionnaire||[]).push([[4],{82286:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var i=n(29439),s=n(72791),r=n(48478),c=n(35549),a=n(2641),o=n(57689),l=n(1413),d=n(14692),u=n(80184);var p=function(e){var t=e.style,n=void 0===t?{}:t;return(0,u.jsx)("div",{style:(0,l.Z)({textAlign:"center"},n),children:(0,u.jsx)(d.Z,{})})},x=n(15401),m=n(70675),j="Stat_container__Fm1Q9",f="Stat_content-wrapper__IdJfg",v="Stat_content__3LPHZ",_="Stat_left__wNrSL",h="Stat_main__63lJK",Z="Stat_right__ujpG3",S=n(16921),C=n(46988),g=n(31773),y=n(86005),N=n(61431),w=n(69228),I=n(23414),P=n(25561),T=n(76864),k=n(22057),L="StatHeader_header-wrapper__p6wBK",b="StatHeader_header__HQBV1",H="StatHeader_left__3fGeI",q="StatHeader_main__ceNek",z="StatHeader_right__LmibG",U=S.Z.Title,K=function(){var e=(0,o.s0)(),t=(0,o.UO)().id,n=(0,x.Z)(),i=n.title,r=n.isPublished,c=(0,s.useRef)(null);function l(){var e,t=c.current;if(!t)return null;t.select();var n=(null===(e=t.input)||void 0===e?void 0:e.value)||"";navigator.clipboard.writeText(n),C.ZP.success("\u590d\u5236\u6210\u529f ".concat(n))}var d=(0,s.useMemo)((function(){if(!r)return null;var e=window.location.origin+"/question/".concat(t);return(0,u.jsxs)(g.Z,{children:[(0,u.jsx)(y.Z,{style:{width:"300px"},value:e,ref:c}),(0,u.jsx)(N.Z,{title:"\u590d\u5236\u94fe\u63a5",children:(0,u.jsx)(a.ZP,{icon:(0,u.jsx)(I.Z,{}),onClick:l})}),(0,u.jsx)(w.Z,{content:(0,u.jsx)(k.ZP,{value:e,size:150}),children:(0,u.jsx)(a.ZP,{icon:(0,u.jsx)(P.Z,{})})})]})}),[t,r]);return(0,u.jsx)("div",{className:L,children:(0,u.jsxs)("div",{className:b,children:[(0,u.jsx)("div",{className:H,children:(0,u.jsxs)(g.Z,{children:[(0,u.jsx)(a.ZP,{type:"link",icon:(0,u.jsx)(T.Z,{}),onClick:function(){return e(-1)},children:"\u8fd4\u56de"}),(0,u.jsx)(U,{children:i})]})}),(0,u.jsx)("div",{className:q,children:d}),(0,u.jsx)("div",{className:z,children:(0,u.jsx)(a.ZP,{type:"primary",onClick:function(){return e("/question/edit/".concat(t))},children:"\u7f16\u8f91\u95ee\u5377"})})]})})},O=n(4942),Q="ComponentList_container__zUunq",B="ComponentList_component-wrapper__a+x6c",F="ComponentList_selected__EBWpQ",G="ComponentList_component__bLQb+",E=n(42573),J=n(81694),A=n.n(J),D=n(37404),M=function(e){var t=e.selectedComponentId,n=e.setSelectedComponentId,i=e.setSelectedComponentType,s=(0,E.Z)().componentList;return(0,u.jsx)("div",{className:Q,children:s.filter((function(e){return!e.isHidden})).map((function(e){var s=e.fe_id,r=e.props,c=e.type,a=D.PS[c].Component,o=A()(B,(0,O.Z)({},F,s===t));return(0,u.jsx)("div",{className:o,onClick:function(){n(s),i(c)},children:(0,u.jsx)("div",{className:G,children:(0,u.jsx)(a,(0,l.Z)({},r))})},s)}))})},R=n(28641),V=n(78036),W=n(33800);var Y=n(31065),X="PageSata_selected__fKitc",$=S.Z.Title,ee=D.I0.find((function(e){return e.groupName===D.YT.Text})),te=function(e){var t=e.selectedComponentId,n=e.setSelectedComponentId,r=e.setSelectedComponentType,c=(0,o.UO)().id,a=void 0===c?"":c,l=(0,E.Z)().componentList,d=(0,s.useState)(1),x=(0,i.Z)(d,2),m=x[0],j=x[1],f=(0,s.useState)(Y.Fo),v=(0,i.Z)(f,2),_=v[0],h=v[1],Z=(0,s.useState)(0),S=(0,i.Z)(Z,2),C=S[0],g=S[1],y=(0,s.useState)([]),N=(0,i.Z)(y,2),w=N[0],I=N[1],P=(0,R.Z)((function(){return function(e,t){var n="/api/stat/".concat(e);return W.Z.get(n,{params:t})}(a,{page:m,pageSize:_})}),{refreshDeps:[a,m,_],onSuccess:function(e){g(e.total),I(e.list)}}).loading,T=l.filter((function(e){var t=e.type;return!ee||!ee.components.some((function(e){return e.type===t}))})).map((function(e){var i=e.fe_id,s=e.type;return{title:(0,u.jsx)("div",{style:{cursor:"pointer"},className:t===i?X:"",onClick:function(){n(i),r(s)},children:e.title}),dataIndex:i}}));return(0,u.jsxs)("div",{children:[(0,u.jsxs)($,{level:3,children:["\u7b54\u5377\u6570\u91cf: ",C]}),P?(0,u.jsx)(p,{}):(0,u.jsx)(V.Z,{rowKey:"_id",dataSource:w,columns:T,pagination:{total:C,current:m,pageSize:_,onChange:function(e){j(e)},onShowSizeChange:function(e,t){j(e),h(t)}}})]})},ne=n(34664),ie=S.Z.Title,se=function(e){var t=(0,o.UO)().id,n=void 0===t?"":t,r=e.selectedComponentId,c=e.selectedComponentType,a=(0,s.useState)([]),l=(0,i.Z)(a,2),d=l[0],x=l[1],m=(0,R.Z)((function(e,t){return function(e,t){var n="/api/stat/".concat(e,"/").concat(t);return W.Z.get(n)}(e,t)}),{manual:!0,onSuccess:function(e){x(e.stat)}}),j=m.loading,f=m.run;(0,s.useEffect)((function(){r&&f(n,r)}),[n,r]);return(0,u.jsxs)("div",{children:[(0,u.jsx)(ie,{level:3,children:"\u56fe\u8868\u7edf\u8ba1"}),(0,u.jsx)("div",{children:function(){if(!r||!c)return(0,u.jsx)(ne.Z,{description:"\u672a\u9009\u4e2d\u7ec4\u4ef6"});var e=D.PS[c].StatChart;return e?j?(0,u.jsx)(p,{}):(0,u.jsx)(e,{data:d}):(0,u.jsx)(ne.Z,{description:"\u5f53\u524d\u7ec4\u4ef6\u6ca1\u6709\u7edf\u8ba1\u56fe\u8868"})}()})]})},re=function(){var e=(0,o.s0)(),t=(0,m.Z)().loading,n=(0,x.Z)(),l=n.isPublished,d=n.title;(0,r.Z)(d+"- \u95ee\u5377\u7edf\u8ba1",{restoreOnUnmount:!0});var S=(0,s.useState)(""),C=(0,i.Z)(S,2),g=C[0],y=C[1],N=(0,s.useState)(),w=(0,i.Z)(N,2),I=w[0],P=w[1],T=(0,u.jsx)(p,{style:{marginTop:"60px"}}),k=(0,u.jsx)("div",{style:{flex:"1"},children:(0,u.jsx)(c.ZP,{status:"warning",title:"\u95ee\u5377\u672a\u53d1\u5e03",extra:(0,u.jsx)(a.ZP,{type:"primary",onClick:function(){return e(-1)},children:"\u8fd4\u56de"})})});return(0,u.jsxs)("div",{className:j,children:[(0,u.jsx)("div",{children:(0,u.jsx)(K,{})}),(0,u.jsx)("div",{className:f,children:t?T:(0,u.jsx)("div",{className:v,children:void 0===l||l?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:_,children:(0,u.jsx)(M,{selectedComponentId:g,setSelectedComponentId:y,setSelectedComponentType:P})}),(0,u.jsx)("div",{className:h,children:(0,u.jsx)(te,{selectedComponentId:g,setSelectedComponentId:y,setSelectedComponentType:P})}),(0,u.jsx)("div",{className:Z,children:(0,u.jsx)(se,{selectedComponentId:g,selectedComponentType:I})})]}):k})})]})}}}]);
//# sourceMappingURL=Stat.413d0681.chunk.js.map